Creates a 4-node puppet cluster:

node01: postgresql    (postgresql.ubnt.int.yo61.net)
node02: puppetdb      (puppetdb.ubnt.int.yo61.net)
node03: puppet master (puppet.ubnt.int.yo61.net)
node04: puppetboard   (pboard.ubnt.int.yo61.net)

puppet ca, puppet master, puppetdb, & pboard certs are pre-generated and stored in hiera

vagrant hostmanager plugin used to update hosts files (guests and host)

puppet is used to provision the hosts - modules are installed to the modules dir using librarian-puppet. roles and profiles are installed from the "local" dir; other modules are either installed from the forge, or directly from github. 

Getting Started
---------------
vagrant plugin nstall vagrant hostmanager
gem insatall librarian puppet
cd provisioning && librarian-puppet install
vagrant up

puppetboard is available at:

http://pboard.ubnt.int.yo61.net

All server certs are pre-generated and deployed from hiera.

To generate client certs, run:

# first run - create the certs
for n in 1 2 3 4; do vagrant ssh --command "sudo puppet agent --test" node0$n ; done

#Â sign the certs on the master
vagrant ssh --command 'for n in 1 2 3 4 ; do sudo puppet cert sign node0$n.ubnt.int.yo61.net ; done' nodoe03

# second run - cert gets pulled down to client and populates puppetdb
for n in 1 2 3 4; do vagrant ssh --command "sudo puppet agent --test" node0$n ; done

# FIXME - set supplementary group for puppetboard user so it can read certs in puppet dir
# should be able to to this a better way, eg. in puppet
vagrant ssh --command "sudo usermod -G puppet -a puppetboard" node04

Now browse to http://pboard.ubnt.int.yo61.net
